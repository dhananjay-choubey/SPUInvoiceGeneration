<mvc:View
    controllerName="com.ifb.invoicegenerator.controller.MaterialMaster"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:mvc="sap.ui.core.mvc"
>
    <Page title="Materials List" showNavButton="true" navButtonPress=".onNavBack">
        <subHeader>
            <Bar id="headerBar">
                <contentMiddle>
                    <SearchField
                        id="searchFieldMaterial"
                        tooltip="Search Material"
                        width="100%"
                        search="onSearchMaterial"
                    />
                    <core:Icon
                        src="sap-icon://download"
                        class="sapUiTinyMarginEnd"
                        color="#8875E7"
                        press="onMaterialExport"
                    >
                        <core:layoutData>
                            <FlexItemData growFactor="1" />
                        </core:layoutData>
                    </core:Icon>
                </contentMiddle>
            </Bar>
        </subHeader>
        <List
            id="materialList"
            items="{path : 'MaterialModel>/'}"
            busyIndicatorDelay="{masterView>/delay}"
            noDataText="{masterView>/noDataText}"
            mode="{= ${device>/system/phone} ? 'None' : 'SingleSelectMaster'}"
            growing="true"
            growingThreshold="10"
            growingScrollToLoad="true"
            updateFinished="onMaterialUpdateFinished"
            selectionChange="onSelectionChange"
            itemPress="onListItemPress"
        >
            <items>
                <ObjectListItem
                    intro="{MaterialModel>materialcode}"
                    title="{MaterialModel>materialdesc}"
                    type="Active"
                >
                    <attributes>
                        <ObjectAttribute
                            title="Mat. Category"
                            text="{MaterialModel>materialcat}"
                            active="false"
                            visible="true"
                        />
                        <ObjectAttribute
                            title="Group Id"
                            text="{MaterialModel>groupid}"
                            active="false"
                            visible="true"
                        />
                    </attributes>
                    <firstStatus>
                        <!-- title="{i18n>createdOn}" -->
                        <ObjectStatus
                            text="{path:'MaterialModel>isactive',formatter: '.formatter.getUserStatus'}"
                            state="{path:'MaterialModel>isactive',formatter: '.formatter.getUserStatusState'}"
                            icon="{path:'MaterialModel>isactive',formatter: '.formatter.getUserStatusIcon'}"
                        />
                    </firstStatus>
                    <secondStatus>
                        <!-- title="{i18n>createdOn}" -->
                        <ObjectStatus
                            text="UOM: {MaterialModel>uom}"
                            state="Success"
                            visible="true"
                        />
                    </secondStatus>
                </ObjectListItem>
            </items>
        </List>
    </Page>
</mvc:View>
